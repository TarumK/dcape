# dcape
Dcape и все, все, все. Часть1.

На данный момент хост mail работает в основном для хождения корпоративной почты. То есть получается один сервер – один сервис. В качестве почтовый сервера у нас используется монолитный sendmail. Монолитность заключается в том, что, что sendmail выполняет весь набор функций по пересылке писем из точки А в точку Б:  обмен письмами из одного почтового сервера с другими почтовыми серверами по SMTP-протоколу (MTA), сортировка писем по почтовым ящикам пользователей(MDA), получение письма конкретным пользователем на свой рабочий компьютер(MUI). Если проводить аналогию из старых добрых времен с  хождением обычной бумажной почты, то MTA-функцию выполняют почтовые ящики в почтовых отделениях разных городов, MDA-функцию  выполняет почтальон, который доставляет и рассортировывает  письма  по ящикам в подъезде дома, а конечным потребителем почты является, человек,  который приносит  корреспонденцию к себе домой. Можно конечно попросить своего ребенка  забрать письмо с домового ящика в подъезде. В этом случае этот ребенок является почтовым клиентом(MUA).
Мы хотим отойти от монолитности в сторону микросервисов. То есть поднять в контейнерах несколько микросервисов: MTA-контейнер, MDA-контейнер, MUA-контейнер. Падение и некорректная работа одной составляющей не должно в идеале приостанавливать работу других сервисов. Выбор пал на связку postfix(MTA)+dovecot(MDA)+roundecube(evolution, thunderbird, pine, mutt и т.д.) (MUA)

Мы закупили производительный сервер. Отдавать ресурсы одного сервера для хождения одной лишь почты расточительно, поэтому стоит задача распределения ресурсов нового сервера по нескольким большим подзадачам, например, поднять на нем систему контроля версий (GIt), локальное хранилище(облако) файлов, инструмент для непрерывной интеграции и непрерывной доставки (CICD) приложений, веб-сервер для домашних страничек пользователей.
В качестве инструмента для решения этих задач была предложена некая надстройка для быстрого разворачивания всего необходимого нам функционала - DCape. Dcape позволяет удаленно разворачивать docker-приложения, управлять их конфигурациями, разграничивать права, управлять через веб-интерфейс запущенными контейнерами по принципу одного окна.

Таким образом, в dcape уже собран базовый набор компонентов для быстрого разворачивания и обслуживания docker-приложений. В дополнение к этому в репозиториий  dcape https://github.com/dopos есть дополнительные приложения, адаптированные для работы c dcape и которые можно «воткнуть» в базовый стек контейнеров.

ЗАДАЧА: В базовый набор добавить контейнер с postfix+dovecot+roundcube.

Я пока застопорился на настройке деплоя(разворачивания) приложений через связку woodpecker ci + gitea. Андрей Яковенко этот этап прошел. Пусть допишет свои главы)
